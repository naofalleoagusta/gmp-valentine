<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gizella, Be My Valentine? üíù</title>
    <meta property="og:title" content="Gizella, Be My Valentine? üíù" />
    <meta property="og:description" content="Gizella, Be My Valentine? üíù" />
    <meta property="og:url" content="https://gmp-be-my-valentine.verce.app" />
    <meta
      property="og:image"
      content="https://gmp-be-my-valentine.verce.app/assets/og-valentine.png"
    />
    <meta property="og:image:alt" content="Description of the image" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Gizella, Be My Valentine? üíù" />
    <meta name="twitter:description" content="Gizella, Be My Valentine? üíù" />
    <meta
      name="twitter:image"
      content="https://gmp-be-my-valentine.verce.app/assets/og-valentine.png"
    />
    <meta name="twitter:image:alt" content="Gizella, Be My Valentine? üíù" />
    <style>
      body {
        margin: 0;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: linear-gradient(45deg, #ffe6ea, #ffb6c1);
        font-family: "Arial", sans-serif;
        overflow: hidden;
      }

      .container {
        text-align: center;
        z-index: 1;
        padding: 20px;
        max-width: 100vw;
        display: none;
      }

      .hearts-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
      }

      .heart {
        position: absolute;
        width: 20vmin; /* Responsive to viewport's smaller dimension */
        height: 20vmin;
        max-width: 150px;
        max-height: 150px;
        opacity: 0.3;
        /* Updated heart shape that uses more of the image space */
        mask-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 90C50 90 87 62 87 35C87 19 74 10 61 10C54 10 50 15 50 15C50 15 46 10 39 10C26 10 13 19 13 35C13 62 50 90 50 90Z' fill='black'/%3E%3C/svg%3E");
        mask-size: contain;
        mask-repeat: no-repeat;
        mask-position: center;
        -webkit-mask-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 90C50 90 87 62 87 35C87 19 74 10 61 10C54 10 50 15 50 15C50 15 46 10 39 10C26 10 13 19 13 35C13 62 50 90 50 90Z' fill='black'/%3E%3C/svg%3E");
        -webkit-mask-size: contain;
        -webkit-mask-repeat: no-repeat;
        -webkit-mask-position: center;
      }

      /* Style for the background image inside heart */
      .heart-bg {
        width: 100%;
        height: 100%;
        background: url("assets/bby.jpeg") center/cover;
        transform: scale(
          1.2
        ); /* Slightly larger to ensure heart shape is filled */
      }

      /* Heart positions */
      .heart-1 {
        left: 2%;
        top: 1%;
      }
      .heart-2 {
        left: 25%;
        top: 14%;
      }
      .heart-3 {
        left: 45%;
        top: 3%;
      }
      .heart-4 {
        left: 65%;
        top: 10%;
      }
      .heart-5 {
        left: 85%;
        top: 20%;
      }

      .heart-6 {
        left: 1%;
        top: 34%;
      }
      .heart-7 {
        left: 35%;
        top: 40%;
      }
      .heart-8 {
        left: 55%;
        top: 50%;
      }
      .heart-9 {
        left: 66%;
        top: 27%;
      }
      .heart-10 {
        left: 3%;
        top: 70%;
      }
      .heart-11 {
        left: 25%;
        top: 56%;
      }
      .heart-12 {
        left: 45%;
        top: 62%;
      }
      .heart-13 {
        left: 65%;
        top: 76%;
      }
      .heart-14 {
        left: 85%;
        top: 80%;
      }

      .heart-15 {
        left: 45%;
        top: 95%;
      }

      .button-container {
        margin-top: 20px;
        display: flex;
        gap: 20px;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
      }

      .btn {
        padding: 15px 30px;
        font-size: 16px;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      #yesBtn {
        position: relative;
        background-color: #ff6b9d;
        color: white;
        animation: pulse 1.5s infinite;
      }

      #noBtn {
        background-color: #ff9eb5;
        color: white;
      }

      #replayBtn {
        background-color: #ff6b9d;
        color: white;

        animation: pulse 1.5s infinite;
      }

      .success {
        display: none;
        text-align: center;
      }

      .success h1 {
        color: #ff6b9d;
        font-size: 48px;
        margin-bottom: 20px;
      }

      @keyframes float {
        0% {
          transform: translateY(0) rotate(0deg);
        }
        50% {
          transform: translateY(-30px) rotate(8deg);
        }
        100% {
          transform: translateY(0) rotate(0deg);
        }
      }

      @keyframes heartbeat {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      .heart {
        animation: float 8s ease-in-out infinite;
      }

      .heart-bg {
        animation: heartbeat 4s ease-in-out infinite;
      }

      /* Staggered animation delays */
      .heart:nth-child(3n) {
        animation-delay: 0s;
      }
      .heart:nth-child(3n + 1) {
        animation-delay: 2s;
      }
      .heart:nth-child(3n + 2) {
        animation-delay: 4s;
      }

      h1 {
        font-size: 32px !important;
        margin-bottom: 40px;
        color: #ff6b9d;
      }

      h2 {
        font-size: 24px !important;
        margin-bottom: 40px;
        color: #ff6b9d;
      }

      .no-border {
        border: 0 !important;
      }

      .swal2-title {
        font-size: 30px !important;
      }
      .swal2-styled {
        font-size: 16px !important;
        padding: 16px 12px !important;
      }

      .arrow {
        position: absolute;
        top: -40px;
        left: 50%;
        transform: translateX(-50%);
        width: 30px;
        height: 30px;
        animation: bounce 1.5s infinite;
      }

      .arrow::before {
        content: "üëá";
        font-size: 24px;
      }

      @keyframes pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(255, 107, 157, 0.4);
        }
        70% {
          box-shadow: 0 0 0 15px rgba(255, 107, 157, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(255, 107, 157, 0);
        }
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateX(-50%) translateY(0);
        }
        40% {
          transform: translateX(-50%) translateY(-20px);
        }
        60% {
          transform: translateX(-50%) translateY(-10px);
        }
      }
    </style>
    <script
      rel="preload"
      src="https://cdn.jsdelivr.net/npm/sweetalert2@11"
    ></script>
    <script
      rel="preload"
      src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0"
    ></script>
    <link
      rel="preload"
      href="assets/gluesong.mp3"
      as="audio"
      type="audio/mpeg"
    />
  </head>
  <body>
    <audio class="song" loop>
      <source src="./assets/gluesong.mp3" />
      Your browser isn't invited for super fun audio time.
    </audio>
    <div class="hearts-bg" id="heartsBg">
      <div class="heart heart-1"><div class="heart-bg"></div></div>
      <div class="heart heart-2"><div class="heart-bg"></div></div>
      <div class="heart heart-3"><div class="heart-bg"></div></div>
      <div class="heart heart-4"><div class="heart-bg"></div></div>
      <div class="heart heart-5"><div class="heart-bg"></div></div>
      <div class="heart heart-6"><div class="heart-bg"></div></div>
      <div class="heart heart-7"><div class="heart-bg"></div></div>
      <div class="heart heart-8"><div class="heart-bg"></div></div>
      <div class="heart heart-9"><div class="heart-bg"></div></div>
      <div class="heart heart-10"><div class="heart-bg"></div></div>
      <div class="heart heart-11"><div class="heart-bg"></div></div>
      <div class="heart heart-12"><div class="heart-bg"></div></div>
      <div class="heart heart-13"><div class="heart-bg"></div></div>
      <div class="heart heart-14"><div class="heart-bg"></div></div>
      <div class="heart heart-15"><div class="heart-bg"></div></div>
    </div>

    <div class="container" id="questionContainer">
      <h1>Bby, will you be my Valentine? üíù</h1>

      <div class="button-container" id="buttonContainer">
        <button id="yesBtn" class="btn">
          <div class="arrow" id="arrow"></div>
          Yes
        </button>
        <button id="noBtn" class="btn">No</button>
      </div>
    </div>

    <div class="success" id="successContainer">
      <img src="assets/pat-hug.gif" alt="cat_love" />
      <h2>üíùüíòüíñ Yayyyy!:3 happy valentine bbyyy üíúüíóüíï</h2>

      <button id="replayBtn" class="btn">Click me to replay hehe üòΩ</button>
    </div>

    <script>
      // Method 2: Using window.matchMedia
      function checkDeviceType() {
        const isMobile = window.matchMedia("(max-width: 768px)").matches;
        const isTablet = window.matchMedia(
          "(min-width: 769px) and (max-width: 1024px)"
        ).matches;
        const isDesktop = window.matchMedia("(min-width: 1025px)").matches;

        return {
          isMobile,
          isTablet,
          isDesktop,
        };
      }
      window.addEventListener("load", () => {
        Swal.fire({
          title: "bbyy, do you want to play music in the background?",
          iconHtml:
            '<img src="/assets/cat_shy.gif" style="width:100px;height:100px;">',
          customClass: {
            icon: "no-border",
          },
          showCancelButton: true,
          confirmButtonColor: "#3085d6",
          cancelButtonColor: "#3085d6",
          confirmButtonText: "Yes",
          cancelButtonText: "YESSSSS!!",
          allowOutsideClick: false,
        }).then((result) => {
          const questionContainer =
            document.getElementById("questionContainer");

          questionContainer.style.display = "block";
          if (result.isConfirmed) {
            document.querySelector(".song").play();
          } else {
            document.querySelector(".song").play();
          }
        });
      });

      const container = document.getElementById("container");

      const yesBtn = document.getElementById("yesBtn");

      function getSpeed() {
        const { isDesktop, isMobile, isTablet } = checkDeviceType();
        if (isDesktop) {
          return 2;
        } else if (isTablet) {
          return 4;
        } else if (isMobile) {
          return 6;
        }
      }

      let x = 0;
      let y = 0;
      let xSpeed = getSpeed();
      let ySpeed = getSpeed();

      let isAnimating = false;
      let animationFrameId = null;

      function animate() {
        const windowWidth = window.innerWidth;
        const windowHeight = window.innerHeight;
        const dvdRect = yesBtn.getBoundingClientRect();

        // Update position
        x += xSpeed;
        y += ySpeed;

        // Check for collision with right/left walls
        if (x + dvdRect.width > windowWidth || x < 0) {
          xSpeed = -xSpeed;
        }

        // Check for collision with top/bottom walls
        if (y + dvdRect.height > windowHeight || y < 0) {
          ySpeed = -ySpeed;
        }

        // Keep DVD within bounds
        x = Math.max(0, Math.min(x, windowWidth - dvdRect.width));
        y = Math.max(0, Math.min(y, windowHeight - dvdRect.height));

        // Apply new position
        yesBtn.style.left = x + "px";
        yesBtn.style.top = y + "px";

        if (isAnimating) {
          animationFrameId = requestAnimationFrame(animate);
        }
      }

      const arrow = document.getElementById("arrow");
      const noBtn = document.getElementById("noBtn");
      const replayBtn = document.getElementById("replayBtn");
      const questionContainer = document.getElementById("questionContainer");
      const successContainer = document.getElementById("successContainer");
      const buttonContainer = document.getElementById("buttonContainer");
      const para = document.createElement("div");
      para.setAttribute("id", "Div1");
      para.style.width = "86px";
      para.style.height = "5px";

      let noClickCount = 0;
      let yesClickCount = 0;
      let yesBtnSize = 18;

      let arrowTopPosition = -40;

      const messages = [
        "Are you sure? ü§î",
        "Bbyy please üò¢",
        "Don't do this to me üòû",
        "You are breaking my heart üíîüò≠",
      ];

      function stopAnimation() {
        isAnimating = false;
        if (animationFrameId) {
          cancelAnimationFrame(animationFrameId);
        }
      }

      noBtn.addEventListener("click", () => {
        if (noClickCount < messages.length) {
          noBtn.textContent = messages[noClickCount];
          if (yesClickCount < 5) {
            yesBtnSize += 20;
            arrowTopPosition -= 20;
            yesBtn.style.fontSize = yesBtnSize + "px";
            yesBtn.style.padding = yesBtnSize / 2 + "px " + yesBtnSize + "px";
            arrow.style.top = arrowTopPosition + "px";
          } else {
            arrow.style.top = "";
            yesBtn.style.fontSize = "";
            yesBtn.style.padding = "";
          }
          noClickCount++;
        } else {
          if (yesClickCount < 5) {
            stopAnimation();
            // Make Yes button fill the screen
            yesBtn.style.position = "absolute";
            yesBtn.style.width = "100vw";
            yesBtn.style.height = "100vh";
            yesBtn.style.fontSize = "72px";
            noBtn.style.display = "none";
            yesBtn.style.top = "0";
            yesBtn.style.left = "0";
            yesBtn.style.transform = "";
          } else {
            noBtn.textContent = "Please click the yes button üòù";
            arrow.style.top = "";
            yesBtn.style.fontSize = "";
            yesBtn.style.padding = "";
          }
        }
      });

      yesBtn.addEventListener("click", (e) => {
        if (yesClickCount < 6) {
          if (noClickCount < messages.length) {
            if (yesClickCount < 1) {
              buttonContainer.appendChild(para);
              buttonContainer.style.flexDirection = "row-reverse";
            }
            if (yesClickCount < 5) {
              isAnimating = true;
              yesBtn.style.position = "absolute";
              const yYesBtn =
                ((Math.random() * (window.innerHeight - 80)) /
                  window.innerHeight) *
                  100 +
                "%";

              const xYesBtn =
                ((Math.random() * (window.innerWidth - 86)) /
                  window.innerWidth) *
                  100 +
                "%";

              yesBtn.style.top = yYesBtn;
              yesBtn.style.left = xYesBtn;
            } else {
              arrow.style.top = "";
              yesBtn.style.fontSize = "";
              yesBtn.style.padding = "";
              animate();
            }
            yesClickCount++;
          } else {
            confetti({
              particleCount: 1000,
              spread: 150,
              origin: { y: 0.6 },
              scalar: 1, // Adjust size
            });
            stopAnimation();
            questionContainer.style.display = "none";
            successContainer.style.display = "block";
            successContainer.style.zIndex = 1;
          }
        } else {
          confetti({
            particleCount: 50,
            spread: 70,
            origin: { y: 0.6 },
            shapes: ["text"],
            scalar: 2, // Adjust size
            text: "‚ù§Ô∏è", // Use love emoji
          });
          questionContainer.style.display = "none";
          successContainer.style.display = "block";
          successContainer.style.zIndex = 1;
        }
      });

      replayBtn.addEventListener("click", () => {
        stopAnimation();
        questionContainer.style.display = "block";
        successContainer.style.display = "none";
        successContainer.style.zIndex = 1;
        yesBtnSize = 18;
        arrowTopPosition = -40;
        yesBtn.style.fontSize = "";
        yesBtn.style.padding = "";

        yesBtn.style.position = "";
        yesBtn.style.width = "";
        yesBtn.style.height = "";
        noBtn.style.display = "";
        yesBtn.style.top = "";
        yesBtn.style.left = "";
        yesBtn.style.transform = "";
        arrow.style.top = "";
        noClickCount = 0;
        yesClickCount = 0;
        buttonContainer.style.flexDirection = "";
        noBtn.textContent = "No";
        const select = document.getElementById("Div1");
        buttonContainer.removeChild(select);
      });
      document.addEventListener("visibilitychange", () => {
        if (document.hidden) {
          document.querySelector(".song").pause(); // Pause when the page is inactive
        } else {
          document.querySelector(".song").play(); // Optionally resume when the page is active again
        }
      });

      window.addEventListener("resize", () => {
        const windowWidth = window.innerWidth;
        const windowHeight = window.innerHeight;
        const dvdRect = yesBtn.getBoundingClientRect();

        // Keep DVD within bounds after resize
        x = Math.min(x, windowWidth - dvdRect.width);
        y = Math.min(y, windowHeight - dvdRect.height);
      });
    </script>
  </body>
</html>
